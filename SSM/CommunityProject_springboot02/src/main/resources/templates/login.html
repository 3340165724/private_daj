<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.3/jquery.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.3.4/axios.js"></script>


</head>
<body>
<div id="bg">

    <!-- 表单部分 -->
    <div class="form">
        <!-- action="/login" 属性指定将表单数据提交到 /login 路径
             name 属性来标识表单数据的键名，这些键名将在控制器层中使用
             控制器层中，您可以使用 @RequestParam 注解来获取表单数据
        -->
        <form>
            <h4>账号密码登录</h4>
            <input type="text" placeholder="输入账号" id="username" name="username"/><br/>
            <input type="password" placeholder="输入密码" id="password" name="password"/><br/>
            <br/>
            <input type="submit" value="登录" id="submit"/>
            <br/>
            <a href="enroll">去注册账号</a>
        </form>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#submit").click(function (event) {
            if (!$("#username").val() || !$("#password").val()) {
                alert("输入用户名和密码！")
            } else {
                axios.post(
                    'http://localhost:8081/doLogin',
                    {
                        username: $("username").val(),
                        password: $("password").val()
                    }
                )
                    .then(response => {
                        window.location.href = "doLogin";
                    })
                    .catch(function (error) {
                        // 处理响应错误
                        console.error(error);
                        alert("用户名或密码错误！")
                    });
            }
        })
    })

</script>

</body>
</html>